!function(Q){var F={};function B(U){if(F[U])return F[U].exports;var s=F[U]={i:U,l:!1,exports:{}};return Q[U].call(s.exports,s,s.exports,B),s.l=!0,s.exports}B.m=Q,B.c=F,B.d=function(Q,F,U){B.o(Q,F)||Object.defineProperty(Q,F,{enumerable:!0,get:U})},B.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},B.t=function(Q,F){if(1&F&&(Q=B(Q)),8&F)return Q;if(4&F&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var U=Object.create(null);if(B.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:Q}),2&F&&"string"!=typeof Q)for(var s in Q)B.d(U,s,function(F){return Q[F]}.bind(null,s));return U},B.n=function(Q){var F=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return B.d(F,"a",F),F},B.o=function(Q,F){return Object.prototype.hasOwnProperty.call(Q,F)},B.p="",B(B.s=0)}([function(module,exports){eval("// game.js\n// import '@babel/polyfill';\n\n/* Initializing */\nconst socket = io.connect('//' + document.domain + ':' + location.port);\nlet user = 0;\nconst canvas = document.getElementById('canvas');\ncanvas.addEventListener(\"contextmenu\", function (e) {\n  e.preventDefault();\n}, false);\nconst ctx = canvas.getContext('2d');\n\nif (window.innerWidth < 500) {\n  canvas.width = 270;\n  canvas.height = 290;\n}\n\nconst mid_width = canvas.width / 2;\nconst mid_height = canvas.height / 2;\nlet tile_buffer = 0; // Tile Buffer: How large tiles are\n// character start (0,0)\n\nlet cx = 0;\nlet cy = 0;\nlet dir = 0;\nlet sx = 0;\nlet sy = 0;\nconst tilesheet = new Image();\ntilesheet.src = \"static/tilesheet.png\";\nconst charsheet = new Image();\ncharsheet.src = \"static/charsheet.png\";\nlet map = [];\n/* MAP OPTIONS */\n\nlet tiles = {};\nlet all_users = {};\n/* DRAWING */\n\nctx.font = \"11pt Verdana\";\nctx.textAlign = \"end\";\nconst w = canvas.clientWidth;\nconst h = canvas.clientHeight - 20;\n\nfunction draw() {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  for (let x = 0; x < w; x += tile_buffer) {\n    const curr_x = x / tile_buffer + (cx - sx);\n\n    for (let y = 0; y < h; y += tile_buffer) {\n      const tile = map[y / tile_buffer + (cy - sy)][curr_x];\n\n      if (Array.isArray(tile)) {\n        for (const def in tile) {\n          drawTile(tile[def], x, y);\n        }\n      } else {\n        drawTile(tile, x, y);\n      }\n    }\n  }\n\n  drawOthers(); // Fill the local character tile\n\n  if (charsheet.complete) {\n    drawPlayer(sx, sy, dir);\n  } else {\n    charsheet.addEventListener('load', drawPlayer);\n  } // Fill the position\n\n\n  ctx.fillStyle = \"white\";\n  ctx.fillRect(0, canvas.height - 20, canvas.width, 20);\n  ctx.strokeText(\"(\" + cx + \", \" + cy + \")\", 14 * tile_buffer + 30, 15 * tile_buffer + 15);\n}\n\nfunction drawTile(tile, x, y) {\n  ctx.beginPath();\n\n  if (tilesheet.complete) {\n    drawImage(tile, x, y);\n  } else {\n    tilesheet.load = drawImage.bind(tile, x, y);\n  }\n\n  ctx.moveTo(x, y);\n  ctx.lineTo(x + tile_buffer, y);\n  ctx.moveTo(x, y);\n  ctx.lineTo(x, y + tile_buffer);\n  ctx.stroke();\n  ctx.closePath();\n}\n\nfunction drawPlayer(x_, y_, direction) {\n  ctx.strokeStyle = \"transparent\";\n  ctx.drawImage(charsheet, direction * tile_buffer, 0, tile_buffer, tile_buffer, x_ * tile_buffer, y_ * tile_buffer, tile_buffer, tile_buffer);\n}\n\nfunction drawImage(tile, x, y) {\n  ctx.strokeStyle = \"transparent\";\n  ctx.drawImage(tilesheet, tile % 10 * tile_buffer, Math.floor(tile / 10) * tile_buffer, tile_buffer, tile_buffer, x, y, tile_buffer, tile_buffer);\n}\n\nfunction drawOthers() {\n  for (const u in all_users) {\n    if (u != user) {\n      const ucx = all_users[u]['cx'];\n      const ucy = all_users[u]['cy'];\n      const x = ucx - cx;\n      const y = ucy - cy;\n\n      if (x >= -sx && x <= sx && y >= -sy && y <= sy) {\n        // Fill the character tile\n        drawPlayer(x + sx, y + sy, all_users[u]['direction']);\n      }\n    }\n  }\n}\n/* MOVEMENT */\n\n\nfunction sendAction(e) {\n  if (![32, 37, 38, 39, 40, 65, 68, 69, 83, 87].includes(e.keyCode)) return;\n  e.preventDefault();\n  listener(); // Reset listeners.\n\n  clickListener();\n\n  if (e.keyCode == 32) {\n    // Spacebar\n    console.log(\"Eventually we will implement the spacebar for interacting\" + \" with items below your character.\");\n  } else if (e.keyCode == 69) {\n    console.log(\"Eventually we will implement the 'e' key for interacting\" + \" with nearby npcs and objects, if your player is facing them!\");\n  }\n\n  socket.emit('json', JSON.stringify({\n    'user': user,\n    'action': e.keyCode\n  }));\n}\n\nfunction determineClick(e) {\n  const click_x = e.offsetX;\n  const click_y = e.offsetY;\n  const mid_offset = 15;\n  const mid_low = mid_width - mid_offset;\n  const mid_high = mid_width - mid_offset;\n\n  if (polygon_click_test(4, [mid_low, mid_high, mid_high, mid_low], // x values\n  [mid_low, mid_low, mid_high, mid_high], // y values\n  click_x, click_y)) {\n    sendAction({\n      'keyCode': 32,\n      'preventDefault': function preventDefault() {}\n    }); // Spacebar\n  } else if (polygon_click_test(3, [0, mid_width, canvas.width], [0, mid_height, 0], click_x, click_y)) {\n    sendAction({\n      'keyCode': 38,\n      'preventDefault': function preventDefault() {}\n    }); // Up\n  } else if (polygon_click_test(3, [0, mid_width, canvas.width], [canvas.height, mid_height, canvas.height], click_x, click_y)) {\n    sendAction({\n      'keyCode': 40,\n      'preventDefault': function preventDefault() {}\n    }); // Down\n  } else if (polygon_click_test(3, [0, mid_width, 0], [0, mid_height, canvas.height], click_x, click_y)) {\n    sendAction({\n      'keyCode': 37,\n      'preventDefault': function preventDefault() {}\n    }); // Left\n  } else if (polygon_click_test(3, [canvas.width, mid_width, canvas.width], [0, mid_height, canvas.height], click_x, click_y)) {\n    sendAction({\n      'keyCode': 39,\n      'preventDefault': function preventDefault() {}\n    }); // Right\n  }\n\n  canvas.addEventListener('mouseup', clickListener);\n  canvas.addEventListener('touchend', clickListener);\n} // polygon_click_test by Wm. Randolph Franklin\n// int list(int) list(int) int int -> bool\n// Consumes the number of vertices, along with each vertex coordinate,\n// as a list of x coordinates and a second list of y coordinates.\n// Tests against clicked coordinates to determine whether the\n// click was within the polygon formed by said vertices.\n\n\nfunction polygon_click_test(nvert, vertx, verty, testx, testy) {\n  let i,\n      j,\n      c = false;\n\n  for (i = 0, j = nvert - 1; i < nvert; j = i++) {\n    if (verty[i] > testy != verty[j] > testy && testx < (vertx[j] - vertx[i]) * (testy - verty[i]) / (verty[j] - verty[i]) + vertx[i]) {\n      c = !c;\n    }\n  }\n\n  return c;\n}\n\nfunction doMove(movement) {\n  cx = movement['cx'];\n  cy = movement['cy'];\n  dir = movement['direction'];\n}\n\nfunction listener() {\n  document.removeEventListener('keydown', sendAction);\n  document.addEventListener('keydown', sendAction);\n}\n\nfunction clickListener() {\n  canvas.removeEventListener('mousedown', determineClick);\n  canvas.removeEventListener('touchstart', determineClick);\n  canvas.removeEventListener('mouseup', clickListener);\n  canvas.removeEventListener('touchend', clickListener);\n  canvas.addEventListener('mousedown', determineClick);\n  canvas.addEventListener('touchstart', determineClick);\n}\n\nlet last;\n\n(function () {\n  function main(timestamp) {\n    if (!last) {\n      last = timestamp;\n      draw();\n    } else {\n      if (timestamp - last > 100) {\n        draw();\n      }\n    }\n\n    requestAnimationFrame(main);\n  }\n\n  socket.on('connect', function () {\n    listener(); // Begin movement listeners\n\n    clickListener();\n  }); // Recieves and populates initial data.\n\n  socket.on('init_data', function (data) {\n    data = JSON.parse(data);\n    user = data[0];\n    cx = data[1][0];\n    cy = data[1][1];\n    dir = data[1][2];\n    map = data[2]['map'];\n    tile_buffer = data[3][0];\n\n    if (canvas.width < 450) {\n      sx = 4;\n      sy = 4;\n    } else {\n      sx = data[3][1];\n      sy = data[3][2];\n    }\n\n    main(); // Start the cycle\n  });\n  socket.on('tiles', function (data) {\n    tiles = JSON.parse(data);\n  }); // Recieves and populates map data.\n\n  socket.on('map_data', function (data) {\n    data = JSON.parse(data);\n  }); // Moves the local player\n\n  socket.on('movement_self', function (data) {\n    data = JSON.parse(data);\n    if (user == data['user']) doMove(data);\n  }); // Updates all players\n\n  socket.on('update_all', function (data) {\n    all_users = JSON.parse(data);\n  });\n  socket.on('failure', function (data) {\n    console.log('Unsynchronized.');\n  });\n})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9nYW1lLmpzP2U2NTciXSwibmFtZXMiOlsic29ja2V0IiwiaW8iLCJjb25uZWN0IiwiZG9jdW1lbnQiLCJkb21haW4iLCJsb2NhdGlvbiIsInBvcnQiLCJ1c2VyIiwiY2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY3R4IiwiZ2V0Q29udGV4dCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ3aWR0aCIsImhlaWdodCIsIm1pZF93aWR0aCIsIm1pZF9oZWlnaHQiLCJ0aWxlX2J1ZmZlciIsImN4IiwiY3kiLCJkaXIiLCJzeCIsInN5IiwidGlsZXNoZWV0IiwiSW1hZ2UiLCJzcmMiLCJjaGFyc2hlZXQiLCJtYXAiLCJ0aWxlcyIsImFsbF91c2VycyIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJ3IiwiY2xpZW50V2lkdGgiLCJoIiwiY2xpZW50SGVpZ2h0IiwiZHJhdyIsImNsZWFyUmVjdCIsIngiLCJjdXJyX3giLCJ5IiwidGlsZSIsIkFycmF5IiwiaXNBcnJheSIsImRlZiIsImRyYXdUaWxlIiwiZHJhd090aGVycyIsImNvbXBsZXRlIiwiZHJhd1BsYXllciIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic3Ryb2tlVGV4dCIsImJlZ2luUGF0aCIsImRyYXdJbWFnZSIsImxvYWQiLCJiaW5kIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwieF8iLCJ5XyIsImRpcmVjdGlvbiIsInN0cm9rZVN0eWxlIiwiTWF0aCIsImZsb29yIiwidSIsInVjeCIsInVjeSIsInNlbmRBY3Rpb24iLCJpbmNsdWRlcyIsImtleUNvZGUiLCJsaXN0ZW5lciIsImNsaWNrTGlzdGVuZXIiLCJjb25zb2xlIiwibG9nIiwiZW1pdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZXRlcm1pbmVDbGljayIsImNsaWNrX3giLCJvZmZzZXRYIiwiY2xpY2tfeSIsIm9mZnNldFkiLCJtaWRfb2Zmc2V0IiwibWlkX2xvdyIsIm1pZF9oaWdoIiwicG9seWdvbl9jbGlja190ZXN0IiwibnZlcnQiLCJ2ZXJ0eCIsInZlcnR5IiwidGVzdHgiLCJ0ZXN0eSIsImkiLCJqIiwiYyIsImRvTW92ZSIsIm1vdmVtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImxhc3QiLCJtYWluIiwidGltZXN0YW1wIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwib24iLCJkYXRhIiwicGFyc2UiXSwibWFwcGluZ3MiOiJBQUFBO0FBRUE7O0FBRUE7QUFDQSxNQUFNQSxNQUFNLEdBQUdDLEVBQUUsQ0FBQ0MsT0FBSCxDQUFXLE9BQU9DLFFBQVEsQ0FBQ0MsTUFBaEIsR0FBeUIsR0FBekIsR0FBK0JDLFFBQVEsQ0FBQ0MsSUFBbkQsQ0FBZjtBQUVBLElBQUlDLElBQUksR0FBRyxDQUFYO0FBRUEsTUFBTUMsTUFBTSxHQUFHTCxRQUFRLENBQUNNLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBZjtBQUNBRCxNQUFNLENBQUNFLGdCQUFQLENBQXdCLGFBQXhCLEVBQ0UsVUFBVUMsQ0FBVixFQUFhO0FBQUNBLEdBQUMsQ0FBQ0MsY0FBRjtBQUFvQixDQURwQyxFQUNzQyxLQUR0QztBQUdBLE1BQU1DLEdBQUcsR0FBR0wsTUFBTSxDQUFDTSxVQUFQLENBQWtCLElBQWxCLENBQVo7O0FBRUEsSUFBSUMsTUFBTSxDQUFDQyxVQUFQLEdBQW9CLEdBQXhCLEVBQTZCO0FBQzNCUixRQUFNLENBQUNTLEtBQVAsR0FBZSxHQUFmO0FBQ0FULFFBQU0sQ0FBQ1UsTUFBUCxHQUFnQixHQUFoQjtBQUNEOztBQUVELE1BQU1DLFNBQVMsR0FBR1gsTUFBTSxDQUFDUyxLQUFQLEdBQWUsQ0FBakM7QUFDQSxNQUFNRyxVQUFVLEdBQUdaLE1BQU0sQ0FBQ1UsTUFBUCxHQUFnQixDQUFuQztBQUVBLElBQUlHLFdBQVcsR0FBRyxDQUFsQixDLENBQXFCO0FBRXJCOztBQUNBLElBQUlDLEVBQUUsR0FBRyxDQUFUO0FBQ0EsSUFBSUMsRUFBRSxHQUFHLENB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Q0FBUjtBQUNELEdBRkQsRUF2Q1csQ0EyQ1g7O0FBQ0E1RyxRQUFNLENBQUMyRyxFQUFQLENBQVUsVUFBVixFQUFzQixVQUFVQyxJQUFWLEVBQWdCO0FBQ3BDQSxRQUFJLEdBQUczQixJQUFJLENBQUM0QixLQUFMLENBQVdELElBQVgsQ0FBUDtBQUNELEdBRkQsRUE1Q1csQ0FnRFg7O0FBQ0E1RyxRQUFNLENBQUMyRyxFQUFQLENBQVUsZUFBVixFQUEyQixVQUFVQyxJQUFWLEVBQWdCO0FBQ3pDQSxRQUFJLEdBQUczQixJQUFJLENBQUM0QixLQUFMLENBQVdELElBQVgsQ0FBUDtBQUNBLFFBQUlyRyxJQUFJLElBQUlxRyxJQUFJLENBQUMsTUFBRCxDQUFoQixFQUNFUixNQUFNLENBQUNRLElBQUQsQ0FBTjtBQUNILEdBSkQsRUFqRFcsQ0F1RFg7O0FBQ0E1RyxRQUFNLENBQUMyRyxFQUFQLENBQVUsWUFBVixFQUF3QixVQUFVQyxJQUFWLEVBQWdCO0FBQ3RDM0UsYUFBUyxHQUFHZ0QsSUFBSSxDQUFDNEIsS0FBTCxDQUFXRCxJQUFYLENBQVo7QUFDRCxHQUZEO0FBSUE1RyxRQUFNLENBQUMyRyxFQUFQLENBQVUsU0FBVixFQUFxQixVQUFVQyxJQUFWLEVBQWdCO0FBQ25DOUIsV0FBTyxDQUFDQyxHQUFSLENBQVksaUJBQVo7QUFDRCxHQUZEO0FBR0QsQ0EvREQiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGdhbWUuanNcclxuXHJcbi8vIGltcG9ydCAnQGJhYmVsL3BvbHlmaWxsJztcclxuXHJcbi8qIEluaXRpYWxpemluZyAqL1xyXG5jb25zdCBzb2NrZXQgPSBpby5jb25uZWN0KCcvLycgKyBkb2N1bWVudC5kb21haW4gKyAnOicgKyBsb2NhdGlvbi5wb3J0KTtcclxuXHJcbmxldCB1c2VyID0gMDtcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLFxyXG4gIGZ1bmN0aW9uIChlKSB7ZS5wcmV2ZW50RGVmYXVsdCgpO30sIGZhbHNlKTtcclxuXHJcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgNTAwKSB7XHJcbiAgY2FudmFzLndpZHRoID0gMjcwO1xyXG4gIGNhbnZhcy5oZWlnaHQgPSAyOTA7XHJcbn1cclxuXHJcbmNvbnN0IG1pZF93aWR0aCA9IGNhbnZhcy53aWR0aCAvIDI7XHJcbmNvbnN0IG1pZF9oZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC8gMjtcclxuXHJcbmxldCB0aWxlX2J1ZmZlciA9IDA7IC8vIFRpbGUgQnVmZmVyOiBIb3cgbGFyZ2UgdGlsZXMgYXJlXHJcblxyXG4vLyBjaGFyYWN0ZXIgc3RhcnQgKDAsMClcclxubGV0IGN4ID0gMDtcclxubGV0IGN5ID0gMDtcclxubGV0IGRpciA9IDA7XHJcblxyXG5sZXQgc3ggPSAwO1xyXG5sZXQgc3kgPSAwO1xyXG5cclxuY29uc3QgdGlsZXNoZWV0ID0gbmV3IEltYWdlKCk7XHJcbnRpbGVzaGVldC5zcmMgPSBcInN0YXRpYy90aWxlc2hlZXQucG5nXCI7XHJcblxyXG5jb25zdCBjaGFyc2hlZXQgPSBuZXcgSW1hZ2UoKTtcclxuY2hhcnNoZWV0LnNyYyA9IFwic3RhdGljL2NoYXJzaGVldC5wbmdcIjtcclxuXHJcbmxldCBtYXAgPSBbXTtcclxuXHJcbi8qIE1BUCBPUFRJT05TICovXHJcbmxldCB0aWxlcyA9IHt9O1xyXG5sZXQgYWxsX3VzZXJzID0ge307XHJcblxyXG4vKiBEUkFXSU5HICovXHJcbmN0eC5mb250ID0gXCIxMXB0IFZlcmRhbmFcIjtcclxuY3R4LnRleHRBbGlnbiA9IFwiZW5kXCI7XHJcbmNvbnN0IHcgPSBjYW52YXMuY2xpZW50V2lkdGg7XHJcbmNvbnN0IGggPSBjYW52YXMuY2xpZW50SGVpZ2h0IC0gMjA7XHJcbmZ1bmN0aW9uIGRyYXcoKSB7XHJcbiAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gIGZvciAobGV0IHggPSAwOyB4IDwgdzsgeCArPSB0aWxlX2J1ZmZlcikge1xyXG4gICAgY29uc3QgY3Vycl94ID0geC90aWxlX2J1ZmZlcisoY3gtc3gpO1xyXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoOyB5ICs9IHRpbGVfYnVmZmVyKSB7XHJcbiAgICAgIGNvbnN0IHRpbGUgPSBtYXBbeS90aWxlX2J1ZmZlcisoY3ktc3kpXVtjdXJyX3hdO1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aWxlKSkge1xyXG4gICAgICAgIGZvciAoY29uc3QgZGVmIGluIHRpbGUpIHtcclxuICAgICAgICAgIGRyYXdUaWxlKHRpbGVbZGVmXSwgeCwgeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGRyYXdUaWxlKHRpbGUsIHgsIHkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkcmF3T3RoZXJzKCk7XHJcblxyXG4gIC8vIEZpbGwgdGhlIGxvY2FsIGNoYXJhY3RlciB0aWxlXHJcbiAgaWYgKGNoYXJzaGVldC5jb21wbGV0ZSkge1xyXG4gICAgZHJhd1BsYXllcihzeCwgc3ksIGRpcik7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgY2hhcnNoZWV0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBkcmF3UGxheWVyKTtcclxuICB9XHJcblxyXG4gIC8vIEZpbGwgdGhlIHBvc2l0aW9uXHJcbiAgY3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuICBjdHguZmlsbFJlY3QoMCwgY2FudmFzLmhlaWdodCAtIDIwLCBjYW52YXMud2lkdGgsIDIwKTtcclxuICBjdHguc3Ryb2tlVGV4dChcclxuICAgIFwiKFwiICsgY3ggKyBcIiwgXCIgKyBjeSArIFwiKVwiLFxyXG4gICAgMTQqdGlsZV9idWZmZXIrMzAsIDE1KnRpbGVfYnVmZmVyKzE1XHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1RpbGUodGlsZSwgeCwgeSkge1xyXG4gIGN0eC5iZWdpblBhdGgoKTtcclxuICBpZiAodGlsZXNoZWV0LmNvbXBsZXRlKSB7XHJcbiAgICBkcmF3SW1hZ2UodGlsZSwgeCwgeSk7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgdGlsZXNoZWV0LmxvYWQgPSBkcmF3SW1hZ2UuYmluZCh0aWxlLCB4LCB5KTtcclxuICB9XHJcbiAgY3R4Lm1vdmVUbyh4LCB5KTtcclxuICBjdHgubGluZVRvKHggKyB0aWxlX2J1ZmZlciwgeSk7XHJcbiAgY3R4Lm1vdmVUbyh4LCB5KTtcclxuICBjdHgubGluZVRvKHgsIHkgKyB0aWxlX2J1ZmZlcik7XHJcbiAgY3R4LnN0cm9rZSgpO1xyXG4gIGN0eC5jbG9zZVBhdGgoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1BsYXllcih4XywgeV8sIGRpcmVjdGlvbikge1xyXG4gIGN0eC5zdHJva2VTdHlsZSA9IFwidHJhbnNwYXJlbnRcIjtcclxuICBjdHguZHJhd0ltYWdlKGNoYXJzaGVldCwgZGlyZWN0aW9uICogdGlsZV9idWZmZXIsIDAsXHJcbiAgICB0aWxlX2J1ZmZlciwgdGlsZV9idWZmZXIsIHhfKnRpbGVfYnVmZmVyLCB5Xyp0aWxlX2J1ZmZlciwgdGlsZV9idWZmZXIsIHRpbGVfYnVmZmVyKVxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3SW1hZ2UodGlsZSwgeCwgeSkge1xyXG4gIGN0eC5zdHJva2VTdHlsZSA9IFwidHJhbnNwYXJlbnRcIjtcclxuICBjdHguZHJhd0ltYWdlKHRpbGVzaGVldCwgKHRpbGUgJSAxMCkgKiB0aWxlX2J1ZmZlciwgTWF0aC5mbG9vcih0aWxlIC8gMTApICogdGlsZV9idWZmZXIsXHJcbiAgICB0aWxlX2J1ZmZlciwgdGlsZV9idWZmZXIsIHgsIHksIHRpbGVfYnVmZmVyLCB0aWxlX2J1ZmZlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdPdGhlcnMoKSB7XHJcbiAgZm9yIChjb25zdCB1IGluIGFsbF91c2Vycykge1xyXG4gICAgaWYgKHUgIT0gdXNlcikge1xyXG4gICAgICBjb25zdCB1Y3ggPSBhbGxfdXNlcnNbdV1bJ2N4J107XHJcbiAgICAgIGNvbnN0IHVjeSA9IGFsbF91c2Vyc1t1XVsnY3knXTtcclxuICAgICAgY29uc3QgeCA9IHVjeCAtIGN4O1xyXG4gICAgICBjb25zdCB5ID0gdWN5IC0gY3k7XHJcbiAgICAgIGlmICh4ID49IC1zeCAmJiB4IDw9IHN4ICYmIHkgPj0gLXN5ICYmIHkgPD0gc3kpIHtcclxuICAgICAgICAvLyBGaWxsIHRoZSBjaGFyYWN0ZXIgdGlsZVxyXG4gICAgICAgIGRyYXdQbGF5ZXIoeCtzeCwgeStzeSwgYWxsX3VzZXJzW3VdWydkaXJlY3Rpb24nXSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qIE1PVkVNRU5UICovXHJcbmZ1bmN0aW9uIHNlbmRBY3Rpb24oZSkge1xyXG4gIGlmICghW1xyXG4gICAgMzIsIDM3LCAzOCwgMzksIDQwLCA2NSwgNjgsIDY5LCA4MywgODdcclxuICBdLmluY2x1ZGVzKGUua2V5Q29kZSkpIHJldHVybjtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGxpc3RlbmVyKCk7IC8vIFJlc2V0IGxpc3RlbmVycy5cclxuICBjbGlja0xpc3RlbmVyKCk7XHJcblxyXG4gIGlmIChlLmtleUNvZGUgPT0gMzIpIHsgLy8gU3BhY2ViYXJcclxuICAgIGNvbnNvbGUubG9nKFwiRXZlbnR1YWxseSB3ZSB3aWxsIGltcGxlbWVudCB0aGUgc3BhY2ViYXIgZm9yIGludGVyYWN0aW5nXCJcclxuICAgICAgKyBcIiB3aXRoIGl0ZW1zIGJlbG93IHlvdXIgY2hhcmFjdGVyLlwiKTtcclxuICB9XHJcblxyXG4gIGVsc2UgaWYgKGUua2V5Q29kZSA9PSA2OSkge1xyXG4gICAgY29uc29sZS5sb2coXCJFdmVudHVhbGx5IHdlIHdpbGwgaW1wbGVtZW50IHRoZSAnZScga2V5IGZvciBpbnRlcmFjdGluZ1wiXHJcbiAgICAgICsgXCIgd2l0aCBuZWFyYnkgbnBjcyBhbmQgb2JqZWN0cywgaWYgeW91ciBwbGF5ZXIgaXMgZmFjaW5nIHRoZW0hXCIpO1xyXG4gIH1cclxuXHJcbiAgc29ja2V0LmVtaXQoJ2pzb24nLCBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAndXNlcic6IHVzZXIsXHJcbiAgICAnYWN0aW9uJzogZS5rZXlDb2RlLFxyXG4gIH0pKVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZXRlcm1pbmVDbGljayhlKSB7XHJcbiAgY29uc3QgY2xpY2tfeCA9IGUub2Zmc2V0WDtcclxuICBjb25zdCBjbGlja195ID0gZS5vZmZzZXRZO1xyXG5cclxuICBjb25zdCBtaWRfb2Zmc2V0ID0gMTU7XHJcbiAgY29uc3QgbWlkX2xvdyA9IG1pZF93aWR0aCAtIG1pZF9vZmZzZXQ7XHJcbiAgY29uc3QgbWlkX2hpZ2ggPSBtaWRfd2lkdGggLSBtaWRfb2Zmc2V0O1xyXG4gIGlmIChwb2x5Z29uX2NsaWNrX3Rlc3QoNCxcclxuICAgIFttaWRfbG93LCBtaWRfaGlnaCwgbWlkX2hpZ2gsIG1pZF9sb3ddLCAvLyB4IHZhbHVlc1xyXG4gICAgW21pZF9sb3csIG1pZF9sb3csIG1pZF9oaWdoLCBtaWRfaGlnaF0sIC8vIHkgdmFsdWVzXHJcbiAgICBjbGlja194LCBjbGlja195KSkge1xyXG4gICAgc2VuZEFjdGlvbih7J2tleUNvZGUnOiAzMiwgJ3ByZXZlbnREZWZhdWx0JzogZnVuY3Rpb24oKXt9fSk7IC8vIFNwYWNlYmFyXHJcbiAgfVxyXG4gIGVsc2UgaWYgKHBvbHlnb25fY2xpY2tfdGVzdCgzLFxyXG4gICAgWzAsIG1pZF93aWR0aCwgY2FudmFzLndpZHRoXSwgWzAsIG1pZF9oZWlnaHQsIDBdLFxyXG4gICAgY2xpY2tfeCwgY2xpY2tfeSkpIHtcclxuICAgIHNlbmRBY3Rpb24oeydrZXlDb2RlJzogMzgsICdwcmV2ZW50RGVmYXVsdCc6IGZ1bmN0aW9uKCl7fX0pOyAvLyBVcFxyXG4gIH1cclxuICBlbHNlIGlmIChwb2x5Z29uX2NsaWNrX3Rlc3QoMyxcclxuICAgIFswLCBtaWRfd2lkdGgsIGNhbnZhcy53aWR0aF0sIFtjYW52YXMuaGVpZ2h0LCBtaWRfaGVpZ2h0LCBjYW52YXMuaGVpZ2h0XSxcclxuICAgIGNsaWNrX3gsIGNsaWNrX3kpKSB7XHJcbiAgICBzZW5kQWN0aW9uKHsna2V5Q29kZSc6IDQwLCAncHJldmVudERlZmF1bHQnOiBmdW5jdGlvbigpe319KTsgLy8gRG93blxyXG4gIH1cclxuICBlbHNlIGlmIChwb2x5Z29uX2NsaWNrX3Rlc3QoMyxcclxuICAgIFswLCBtaWRfd2lkdGgsIDBdLCBbMCwgbWlkX2hlaWdodCwgY2FudmFzLmhlaWdodF0sXHJcbiAgICBjbGlja194LCBjbGlja195KSkge1xyXG4gICAgc2VuZEFjdGlvbih7J2tleUNvZGUnOiAzNywgJ3ByZXZlbnREZWZhdWx0JzogZnVuY3Rpb24oKXt9fSk7IC8vIExlZnRcclxuICB9XHJcbiAgZWxzZSBpZiAocG9seWdvbl9jbGlja190ZXN0KDMsXHJcbiAgICBbY2FudmFzLndpZHRoLCBtaWRfd2lkdGgsIGNhbnZhcy53aWR0aF0sIFswLCBtaWRfaGVpZ2h0LCBjYW52YXMuaGVpZ2h0XSxcclxuICAgIGNsaWNrX3gsIGNsaWNrX3kpKSB7XHJcbiAgICBzZW5kQWN0aW9uKHsna2V5Q29kZSc6IDM5LCAncHJldmVudERlZmF1bHQnOiBmdW5jdGlvbigpe319KTsgLy8gUmlnaHRcclxuICB9XHJcblxyXG4gIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2xpY2tMaXN0ZW5lcik7XHJcbiAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgY2xpY2tMaXN0ZW5lcik7XHJcbn1cclxuXHJcbi8vIHBvbHlnb25fY2xpY2tfdGVzdCBieSBXbS4gUmFuZG9scGggRnJhbmtsaW5cclxuLy8gaW50IGxpc3QoaW50KSBsaXN0KGludCkgaW50IGludCAtPiBib29sXHJcbi8vIENvbnN1bWVzIHRoZSBudW1iZXIgb2YgdmVydGljZXMsIGFsb25nIHdpdGggZWFjaCB2ZXJ0ZXggY29vcmRpbmF0ZSxcclxuLy8gYXMgYSBsaXN0IG9mIHggY29vcmRpbmF0ZXMgYW5kIGEgc2Vjb25kIGxpc3Qgb2YgeSBjb29yZGluYXRlcy5cclxuLy8gVGVzdHMgYWdhaW5zdCBjbGlja2VkIGNvb3JkaW5hdGVzIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZVxyXG4vLyBjbGljayB3YXMgd2l0aGluIHRoZSBwb2x5Z29uIGZvcm1lZCBieSBzYWlkIHZlcnRpY2VzLlxyXG5mdW5jdGlvbiBwb2x5Z29uX2NsaWNrX3Rlc3QoIG52ZXJ0LCB2ZXJ0eCwgdmVydHksIHRlc3R4LCB0ZXN0eSApIHtcclxuICAgIGxldCBpLCBqLCBjID0gZmFsc2U7XHJcbiAgICBmb3IoIGkgPSAwLCBqID0gbnZlcnQtMTsgaSA8IG52ZXJ0OyBqID0gaSsrICkge1xyXG4gICAgICAgIGlmKCAoICggdmVydHlbaV0gPiB0ZXN0eSApICE9ICggdmVydHlbal0gPiB0ZXN0eSApICkgJiZcclxuICAgICAgICAgICAgKCB0ZXN0eCA8ICggdmVydHhbal0gLSB2ZXJ0eFtpXSApICogKCB0ZXN0eSAtIHZlcnR5W2ldICkgLyAoIHZlcnR5W2pdIC0gdmVydHlbaV0gKSArIHZlcnR4W2ldICkgKSB7XHJcbiAgICAgICAgICAgICAgICBjID0gIWM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRvTW92ZShtb3ZlbWVudCkge1xyXG4gIGN4ID0gbW92ZW1lbnRbJ2N4J107XHJcbiAgY3kgPSBtb3ZlbWVudFsnY3knXTtcclxuICBkaXIgPSBtb3ZlbWVudFsnZGlyZWN0aW9uJ107XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxpc3RlbmVyKCkge1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBzZW5kQWN0aW9uKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgc2VuZEFjdGlvbik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsaWNrTGlzdGVuZXIoKSB7XHJcbiAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGRldGVybWluZUNsaWNrKTtcclxuICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGRldGVybWluZUNsaWNrKTtcclxuICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGNsaWNrTGlzdGVuZXIpO1xyXG4gIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGNsaWNrTGlzdGVuZXIpO1xyXG4gIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBkZXRlcm1pbmVDbGljayk7XHJcbiAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkZXRlcm1pbmVDbGljayk7XHJcbn1cclxuXHJcbmxldCBsYXN0O1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gIGZ1bmN0aW9uIG1haW4oIHRpbWVzdGFtcCApIHtcclxuICAgIGlmICghbGFzdCkge1xyXG4gICAgICBsYXN0ID0gdGltZXN0YW1wXHJcbiAgICAgIGRyYXcoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBpZiAodGltZXN0YW1wIC0gbGFzdCA+IDEwMCkge1xyXG4gICAgICAgIGRyYXcoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBtYWluICk7XHJcbiAgfVxyXG5cclxuICBzb2NrZXQub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbigpIHtcclxuICAgIGxpc3RlbmVyKCk7IC8vIEJlZ2luIG1vdmVtZW50IGxpc3RlbmVyc1xyXG4gICAgY2xpY2tMaXN0ZW5lcigpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBSZWNpZXZlcyBhbmQgcG9wdWxhdGVzIGluaXRpYWwgZGF0YS5cclxuICBzb2NrZXQub24oJ2luaXRfZGF0YScsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgIHVzZXIgPSBkYXRhWzBdO1xyXG4gICAgY3ggPSBkYXRhWzFdWzBdO1xyXG4gICAgY3kgPSBkYXRhWzFdWzFdO1xyXG4gICAgZGlyID0gZGF0YVsxXVsyXTtcclxuICAgIG1hcCAgPSBkYXRhWzJdWydtYXAnXTtcclxuICAgIHRpbGVfYnVmZmVyID0gZGF0YVszXVswXTtcclxuICAgIGlmIChjYW52YXMud2lkdGggPCA0NTApIHtcclxuICAgICAgc3ggPSA0O1xyXG4gICAgICBzeSA9IDQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgc3ggPSBkYXRhWzNdWzFdO1xyXG4gICAgICBzeSA9IGRhdGFbM11bMl07XHJcbiAgICB9XHJcbiAgICBtYWluKCk7IC8vIFN0YXJ0IHRoZSBjeWNsZVxyXG4gIH0pO1xyXG5cclxuICBzb2NrZXQub24oJ3RpbGVzJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIHRpbGVzID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICB9KTtcclxuXHJcbiAgLy8gUmVjaWV2ZXMgYW5kIHBvcHVsYXRlcyBtYXAgZGF0YS5cclxuICBzb2NrZXQub24oJ21hcF9kYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBNb3ZlcyB0aGUgbG9jYWwgcGxheWVyXHJcbiAgc29ja2V0Lm9uKCdtb3ZlbWVudF9zZWxmJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgaWYgKHVzZXIgPT0gZGF0YVsndXNlciddKVxyXG4gICAgICBkb01vdmUoZGF0YSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIFVwZGF0ZXMgYWxsIHBsYXllcnNcclxuICBzb2NrZXQub24oJ3VwZGF0ZV9hbGwnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgYWxsX3VzZXJzID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICB9KTtcclxuXHJcbiAgc29ja2V0Lm9uKCdmYWlsdXJlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKCdVbnN5bmNocm9uaXplZC4nKTtcclxuICB9KTtcclxufSkoKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")}]);